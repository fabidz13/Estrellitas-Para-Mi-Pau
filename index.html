<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estrellitas Para Mi Pau ‚ú®üå∑</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
    overflow: hidden;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex-direction: column;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    padding: 20px;
    color: #fff;
  }

  canvas {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
  }

  #message {
    font-size: 1.4rem;
    z-index: 1;
    max-width: 800px;
    line-height: 1.6;
    white-space: pre-wrap;
    margin-bottom: 150px;
    text-shadow: 0 0 20px rgba(255,255,255,0.6);
  }

  .line {
    display: block;
    opacity: 0;
    transform: translateY(20px);
    transition: all 1s ease;
  }

  #music-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 2;
    background: rgba(0,0,0,0.4);
    border: none;
    color: white;
    padding: 10px 16px;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 10px;
    backdrop-filter: blur(5px);
    transition: 0.3s;
  }

  #music-btn:hover {
    background: rgba(255,255,255,0.2);
  }
</style>
</head>
<body>
<canvas id="stars"></canvas>
<div id="message"></div>
<button id="music-btn">‚ñ∂Ô∏è</button>

<audio id="bg-music" loop>
  <source src="mygirl.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
const messageEl = document.getElementById("message");
const musicBtn = document.getElementById("music-btn");
const audio = document.getElementById("bg-music");

function resizeCanvas() { 
  canvas.width = window.innerWidth; 
  canvas.height = window.innerHeight; 
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let playing = false;
musicBtn.addEventListener("click", async ()=>{
  if(!playing){
    await audio.play();
    playing = true;
    musicBtn.textContent = '‚è∏Ô∏è';
  } else {
    audio.pause();
    playing = false;
    musicBtn.textContent = '‚ñ∂Ô∏è';
  }
});

let stars = [];
for(let i=0;i<150;i++){
  stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,radius:Math.random()*1.5,alpha:Math.random(),speed:Math.random()*0.02});
}

function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(s=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.radius,0,Math.PI*2);
    ctx.fillStyle=`rgba(255,255,255,${s.alpha})`;
    ctx.fill();
    s.alpha += s.speed;
    if(s.alpha<=0||s.alpha>=1) s.speed *= -1;
  });
}

const tulipParts = {
  stem: {color:"rgba(100,255,100,0.8)",points:[{x:0,y:0},{x:0,y:-0.5},{x:0,y:-1},{x:0,y:-1.5}]},
  petalLeft: {color:"rgba(255,150,200,0.9)",points:[{x:0,y:-1.5},{x:-0.5,y:-2},{x:-0.8,y:-2.5},{x:-0.5,y:-3},{x:0,y:-3.2}]},
  petalRight: {color:"rgba(255,150,200,0.9)",points:[{x:0,y:-1.5},{x:0.5,y:-2},{x:0.8,y:-2.5},{x:0.5,y:-3},{x:0,y:-3.2}]},
  leafLeft: {color:"rgba(100,255,100,0.8)",points:[{x:0,y:-0.7},{x:-0.6,y:-0.7},{x:-1,y:-0.3}]},
  leafRight: {color:"rgba(100,255,100,0.8)",points:[{x:0,y:-0.7},{x:0.6,y:-0.7},{x:1,y:-0.3}]}
};
let drawIndex = 0;
const drawSpeed = 300;
let tulipStarAlpha = [];

function drawTulip(){
  const cx = canvas.width/2;
  const cy = canvas.height/2 + 50;
  const scale = 100;
  let parts = Object.values(tulipParts);
  let counter = 0;
  for(let part of parts){
    ctx.strokeStyle=part.color;
    ctx.lineWidth=2;
    ctx.beginPath();
    part.points.forEach((p,i)=>{
      const px = cx + p.x*scale;
      const py = cy + p.y*scale;
      if(counter<=drawIndex){
        if(i===0) ctx.moveTo(px,py); else ctx.lineTo(px,py);
        if(!tulipStarAlpha[counter]) tulipStarAlpha[counter]={alpha:1,speed:Math.random()*0.02, baseRadius:3};
        let s = tulipStarAlpha[counter];
        s.alpha += s.speed;
        if(s.alpha>=1||s.alpha<=0.3) s.speed*=-1;
        ctx.beginPath();
        ctx.arc(px,py,s.baseRadius,0,Math.PI*2);
        ctx.fillStyle=`rgba(255,255,255,${s.alpha})`;
        ctx.fill();
      }
      counter++;
    });
    ctx.stroke();
  }
}

function animate(){
  drawStars();
  drawTulip();
  requestAnimationFrame(animate);
}
animate();

function revealTulip(){
  let totalPoints = 0;
  for(let part of Object.values(tulipParts)) totalPoints += part.points.length;
  if(drawIndex<totalPoints){
    drawIndex++;
    setTimeout(revealTulip,drawSpeed);
  }
}
revealTulip();

const textLines = [
  "Hoy quise hacer esto,",
  "como un recordatorio de lo mucho que te quiero,",
  "y me encantas mi Pau. üíñ",
  "",
  "Cada estrella es √∫nica,",
  "pero ninguna brillar√≠a tanto como t√∫. ‚ú®",
  "",
  "T√∫ eres esa luz que ilumina mi coraz√≥n",
  "y haces que lata fuerte... tuncun tuncun üíì"
];

function showMessage(){
  textLines.forEach((line,i)=>{
    const span = document.createElement('span');
    span.textContent = line;
    span.className='line';
    messageEl.appendChild(span);
    setTimeout(()=>{
      if(i === 0){
        span.style.transition = 'opacity 2s ease, transform 2s ease';
      }
      span.style.opacity = 1;
      span.style.transform = 'translateY(0)';
    }, i*800);
  });
}


setTimeout(showMessage,6000);
</script>
</body>
</html>

